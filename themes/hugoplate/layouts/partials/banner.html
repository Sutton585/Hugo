{{/* layouts/partials/banner.html */}}

{{ with . }}

  <!-- default (center) layout -->
    
    <section id="banner" class="section pb-6 pt-14">

      <div class="container">
        <div class="row justify-center">


          <!-- top-image -->
          {{ if .image }}
            <div class="col-12">
              {{ partial "image" (dict "Src" .image "Alt" "Banner image" "Loading" "eager" "Class" "mx-auto mb-6" "Size" "150x150" ) }}
              </div>
            {{ end }}
          {{ end }}
          
          <!-- text content -->
          <div class="lg:col-8 md:col-9 text-center">
              <h1 class="mb-4 text-h2 lg:text-h1">
                {{ .title | markdownify }}
              </h1> 
              <p class="mb-8">
                {{ .content | markdownify }}
              </p>
              
              <!-- buttons -->
              <div class="flex justify-center gap-4">
                {{ with .button }}
                  {{ if .enable }}
                    <a class="btn btn-primary" href="{{ .link | absURL }}" {{ if strings.HasPrefix .link `http` }} target="_blank" rel="noopener" {{ end }}>
                      {{ .label }} <i class="fa fa-arrow-right pl-2"></i>
                    </a>
                  {{ end }} 
                {{ end }}
                {{ with .button2 }}
                  {{ if .enable }}
                    <a class="btn btn-outline-primary" href="{{ .link | absURL }}" {{ if strings.HasPrefix .link `http` }} target="_blank" rel="noopener" {{ end }}>
                      {{ .label }} <i class="fa fa-arrow-right pl-2"></i>
                    </a>
                  {{ end }} 
                {{ end }}
              </div>
          </div>

          <!-- bottom-image -->
          {{ if .image2 }}
            <div class="col-12 mt-8">

                {{ partial "image" (dict "Src" .image2 "Alt" "Banner image (bottom)" "Loading" "lazy" "Class" "mx-auto lg:!max-w-[800px]" "DisplayXL" "800x" ) }}
            </div>
          {{ end }}

          <!-- client logos -->
          {{ if .clientLogos }}
            
              {{ partial "image" (dict 
                  "Src" .clientLogos 
                  "Alt" "Client Logos" 
                  "Loading" "eager" 
                  "Size" "900x" 
                  "Class" "opacity-40 w-[900px]")}}
            
          {{ end }}
          
          {{ with .clients}}
            {{ if .enable }}
              <div class="container">
                {{ if or .title .content }}
                <div class="row">
                  <div class="mx-auto mb-12 text-center lg:col-8">
                    <h5>{{ .title | markdownify }}</h5>
                    <h5 class="text-text-light">{{ .content | markdownify }}</h5>
                  </div>
                </div>
                {{ end }}
                <div class="row">
                  <div class="col-12 py-4">
                    
                    {{/* --- 1. The Main Clickable Wrapper --- */}}
                    {{/* We wrap everything in a link, make it a block, and add the 'group' class for hover effects */}}
                    <a href="/ux/" class="group relative block overflow-hidden opacity-50">
                      
                      {{/* --- 2. The Logo Section (The background content) --- */}}
                      {{ $galleryPath := .gallery }}
                      {{ $allLogos := readDir (printf "assets/%s" $galleryPath) }}
                      {{ $midpoint := div (len $allLogos) 2 }}
                      {{ $row1Logos := first $midpoint $allLogos }}
                      {{ $row2Logos := after $midpoint $allLogos }}

                      <div class="flex flex-col gap-8 max-w-4xl mx-auto">
                        <div class="flex w-full items-center justify-evenly">
                          {{ range $row1Logos }}
                            {{ $image := resources.Get (printf "%s/%s" $galleryPath .Name) }}
                            {{ if $image }}
                              {{ $logo := $image.Resize "x30" }}
                              <img src="{{ $logo.RelPermalink }}" alt="{{ .Name | replaceRE `\\..*` "" }}" class="w-auto">
                            {{ end }}
                          {{ end }}
                        </div>
                        <div class="flex w-full items-center justify-evenly">
                          {{ range $row2Logos }}
                            {{ $image := resources.Get (printf "%s/%s" $galleryPath .Name) }}
                            {{ if $image }}
                              {{ $logo := $image.Resize "x30" }}
                              <img src="{{ $logo.RelPermalink }}" alt="{{ .Name | replaceRE `\\..*` "" }}" class="w-auto">
                            {{ end }}
                          {{ end }}
                        </div>
                      </div>

                      {{/* --- 3. The Hover Overlay with Blur and Button --- */}}
                      <div class="absolute inset-0 flex items-center justify-center bg-body/80 dark:bg-darkmode-body/80 opacity-0 backdrop-blur-sm transition-opacity duration-200 group-hover:opacity-100 max-w-4xl mx-auto">
                        <span class="btn btn-outline-sm rounded-full">
                          See my work
                          <i class="fa fa-arrow-right pl-2"></i>
                        </span>
                      </div>

                    </a>
                  </div>
                </div>
              </div>
            {{ end }}
          {{ end }}

        </div>
      </div>
    </section>
    <!-- end of default (center )layout -->
